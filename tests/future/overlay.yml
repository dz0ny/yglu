# Idea for future feature:
# Provide overlay for convenient merge customization
left: !-
  a:
    b: !? 2
    x: !? 2
  c: 1
  e: 
    - name: one
      value: 0
    - name: two
      value: 2   
  f: 
    a: 1

right: !-
  a:
    b: !? 3
    x: !? 3
  d: 4
  e: 
    - name: one
      value: 1
  f:
    b: 1

actual: !? $overlay($_.rules)
  ($_.left)
  ($_.right)
  ()

rules: !() '{
    $.a => $merge(with => lambda({ b => $1.b + $2.b })),
    $.e => $merge(matcher => lambda($.name))
    $.f => lambda($2)
  }'
rules: !- 
  ? !() $.a
  : !() $merge([$1, $2, { b => $1.b + $2.b }])
  ? !() $.e
  : !() $merge([$1, $2], matchBy = lambda($.name))
  ? !() $.f
  : !() $2
